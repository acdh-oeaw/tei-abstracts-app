<?xml version="1.0" encoding="UTF-8"?>
<div class="templates:surround?with=templates/page.html&amp;at=content">
    <script src="../resources/js/highcharts/highcharts.js"/>
    <script src="../resources/js/highcharts/highcharts-3d.js"/>
    <script src="../resources/js/highcharts/exporting.js"/>
    
    <div class="panel panel-default" style="text-align:center;">
        <div class="panel-heading">
            <h2>Countries and Institutions</h2>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="#collapse1">Contributors and Countries</a>
                                </h4>
                            </div>
                            <div id="collapse1" class="panel-collapse">
                                <div class="panel-body" id="chart1">Panel Body</div>
                                <div class="panel-footer">
                                    <a href="../analyze/author-country.xql">data source</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="#collapse2">Contributors and Institutions</a>
                                </h4>
                            </div>
                            <div id="collapse2" class="panel-collapse">
                                <div class="panel-body" id="chart2">Panel Body</div>
                                <div class="panel-footer">
                                    <a href="../analyze/author-organisation.xql">data source</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <h4/>
            </div>
        </div>
        <div class="panel-footer">
            <a href="show.html?document=countries.xml&amp;directory=meta&amp;stylesheet=editions">About the data</a>
        </div>
    </div>
    
    
    <script type="text/javascript">
        
        
        $(document).ready(function() {
            $.getJSON( "../analyze/author-country.xql", function( data ) {
                var charts_data = [];
                var payload = data.payload;
                var newData = [];
                for (var i = 0; i &lt; payload.length; i++) {
                    var item = [];
                    item.push(payload[i].name);
                    item.push(parseInt(payload[i].amount));
                    newData.push(item)
                }
                console.log(newData);
                $('#chart1').highcharts({
                chart: {
                
                type: 'pie',
                options3d: {
                enabled: true,
                alpha: 45
                }
                },
                title: {
                text: ""
                },
                subtitle: {
                text: data.header
                },
                plotOptions: {
                pie: {
                innerSize: 50,
                depth: 40
                }
                },
                series: [{
                name: "Authors",
                data: newData
                
                }]
                });  
            });
            
            $.getJSON( "../analyze/author-organisation.xql", function( data ) {
                var charts_data = [];
                var payload = data.payload;
                var newData = [];
                for (var i = 0; i &lt; payload.length; i++) {
                    var item = [];
                    item.push(payload[i].name);
                    item.push(parseInt(payload[i].amount));
                    newData.push(item)
                }
                console.log(newData);
                $('#chart2').highcharts({
                chart: {
                
                type: 'pie',
                options3d: {
                enabled: true,
                alpha: 45
                }
                },
                title: {
                text: ""
                },
                subtitle: {
                text: data.header
                },
                plotOptions: {
                pie: {
                innerSize: 50,
                depth: 40
                }
                },
                series: [{
                name: "Authors",
                data: newData
                
                }]
                });  
            });
        });
        
    </script>
</div>